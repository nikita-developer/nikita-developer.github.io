<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>leadtop-scripts</title>
</head>

<body>
    <div id="dataPost">xcv</div>
    <div class="commits">
        <div class="commits__title">Комментарии</div>
        <div class="commits__item">
            <div class="commits__head">
                <div class="commits__face"><img src="img/face1.jpg" alt=""></div>
                <div class="commits__info">
                    <div class="commits__name">Name</div>
                    <div class="commits__date"></div>
                </div>
            </div>
            <div class="commits__body">
                <div class="commits__description">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Optio voluptatem quam at repellat aliquam laboriosam sed provident, beatae reprehenderit amet!</div>
            </div>
        </div>
        <div class="commits__item">
            <div class="commits__head">
                <div class="commits__face"><img src="img/face1.jpg" alt=""></div>
                <div class="commits__info">
                    <div class="commits__name">Name</div>
                    <div class="commits__date"></div>
                </div>
            </div>
            <div class="commits__body">
                <div class="commits__description">Lorem ipsum dolor sit amet, consectetur
                    <div class="commits__media"><img src="img/face1.jpg" alt=""></div>
                </div>
            </div>
        </div>
        <div class="commits__item commits__item_hide" id="my-message">
            <div class="commits__head">
                <div class="commits__face"></div>
                <div class="commits__info">
                    <div class="commits__name" id="commits__name"></div>
                    <div class="commits__date"></div>
                </div>
            </div>
            <div class="commits__body">
                <div class="commits__description" id="commits__description"></div>
            </div>
        </div>
        <div class="commits__item" id="send-message">
            <div class="commits__add">
                <div class="commits__add-title">Хотите написать сообщение?</div>
                <div class="commits__add-box">
                    <input id="myName" class="commits__field-name" type="text" placeholder="Name">
                    <textarea id="myMessage" class="commits__field-message" placeholder="Message"></textarea>
                    <button id="mySend" class="commits__add-btn">Отправить</button>
                </div>
            </div>
        </div>
    </div>
    <style>
        .commits {
            padding: 15px;
            font-family: 'Roboto', sans-serif;
            font-size: 16px;
        }

        .commits__title {
            margin-bottom: 15px;
            font-size: 24px;
        }

        .commits__item {
            padding: 25px 0 0;
        }

        .commits__item.hide .commits__add {
            display: none;
        }

        .commits__item+.commits__item {
            margin-top: 20px;
            border-top: 1px solid #eaeaea;
        }

        .commits__item:first-child {
            padding-top: 0;
        }

        .commits__head {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

        .commits__face {
            width: 50px;
            height: 50px;
            margin-right: 10px;
            background-color: gray;
            overflow: hidden;
        }

        .commits__face img {
            display: block;
            width: 100%;
        }

        .commits__name {
            font-size: 14px;
        }

        .commits__date {
            font-size: 12px;
        }

        /* .commits__body {} */

        .commits__description {
            color: #000;
            line-height: 24px;
        }

        .commits__media {
            margin-top: 10px;
        }

        .commits__success {
            display: inline-block;
            padding: 5px 15px;
            margin-top: 20px;
            font-style: italic;
            font-size: 12px;
            background-color: #e2e2e2;
        }

        .commits__media img {
            display: block;
            max-width: 100%;
        }

        .commits__add-title {
            margin-bottom: 10px;
        }

        .commits__field-name {
            display: block;
            width: 100%;
            max-width: 230px;
            margin-bottom: 10px;
            padding: 5px;
        }

        .commits__field-message {
            display: block;
            width: 100%;
            height: 100px;
            max-width: 500px;
            margin-bottom: 10px;
            padding: 5px;
            resize: none;
        }

        .commits__item_hide {
            display: none;
        }

        .commits_error {
            border-color: red;
        }

        @media(max-width: 480px) {
            .commits__description {
                font-size: 14px;
            }
        }
    </style>
    <script>
        window.onload = function() {
            /*
            КОММЕНТАРИИ
            ===================================================================>

            ХОТИМ ДОБАВИТЬ БЛОК КОММЕНТОВ
            ===================================================================>
            вызываем функцию addCommits('minTime');
            в параметры передаем формат даты (какие есть форматы описано ниже)
            если нужно установить дату на публикацию поста можно просто навесить класс commits__date

            ХОТИМ ДОБАВИТЬ ДАТУ
            ===================================================================>
            запускаем функцию и указываем параметры
            time('className', 'format');

            PARAMETERS
            ===================================================================>
            className - указываем класс к которому хотим добавить дату
            format - указываем формат в кавычках ('fullTime')

            OPTIONS
            ===================================================================>
            fullTime   - дата в формате 00.00.0000
            minTime    - дата в формате 00.00.00
            year       - год
            month      - месяц
            day        - день
            day-month  - день и месяц
            day-year   - день и год
            month-year - месяц и год
        */

            time('className', 'minTime');
            time('datatime', 'minTime');

            /*комменты для сайта*/
            addCommits('minTime');

            function addCommits(formatDate) {
                var $name = document.getElementById('myName'),
                    $message = document.getElementById('myMessage'),
                    $setName = document.getElementById('commits__name'),
                    $setMessage = document.getElementById('commits__description'),
                    $mySend = document.getElementById('mySend'),
                    $sendMessage = document.getElementById('my-message'),
                    $myMessage = document.getElementById('send-message');

                if (sessionStorage.getItem('commit') == 1) {
                    $myMessage.classList.add('commits__item_hide');
                    $sendMessage.classList.remove('commits__item_hide');
                    $setName.innerHTML = sessionStorage.getItem('name');
                    $setMessage.innerHTML = sessionStorage.getItem('message');
                }
                $mySend.onclick = function() {
                    if ($name.value == 0 || $name.value == "") {
                        $name.classList.add('commits_error');
                        if ($message.value == 0 || $message.value == "") {
                            $message.classList.add('commits_error');
                        } else {
                            $message.classList.remove('commits_error');
                        }
                    } else {
                        $name.classList.remove('commits_error');
                        if ($message.value == 0 || $message.value == "") {
                            $message.classList.add('commits_error');
                        } else {
                            $message.classList.remove('commits_error');
                            sessionStorage.setItem('name', $name.value);
                            sessionStorage.setItem('message', $message.value);
                            sessionStorage.setItem('commit', 1);
                            $myMessage.classList.add('commits__item_hide');
                            $sendMessage.classList.remove('commits__item_hide');
                            $setName.innerHTML = sessionStorage.getItem('name');
                            $setMessage.innerHTML = sessionStorage.getItem('message');
                        }
                    }
                }
                addDate('commits__date', formatDate);
            }

            /*проверка на заполненность полей*/


            /*вешаем дату на любой класс*/
            function time(className, format) {
                var elem = document.getElementsByClassName(className),
                    d = new Date(),
                    $thisDate = formatDate(d, format);

                for (var i = 0; i < elem.length; i++) {
                    elem[i].innerHTML = $thisDate;
                }
            }

            /*вешаем дату на комметарии*/
            function addDate(className, formatData) {
                var $date = document.getElementsByClassName(className);
                var dataPost = document.getElementById('dataPost');
                for (var i = $date.length - 1; i >= 0; i--) {
                    var d = new Date();
                    d.setDate(d.getDate() - (($date.length - 1) - i));
                    $date[i].innerHTML = formatDate(d, formatData);
                    dataPost.innerHTML = formatDate(d, formatData);
                }
            }

            /*формат дат*/
            function formatDate(date, format) {
                var dd = date.getDate(),
                    mm = date.getMonth(),
                    yy = date.getFullYear();

                if (format == 'fullTime') {
                    if (dd < 10) dd = '0' + dd;
                    if (mm += 1 < 10) mm = '0' + mm;
                    if (yy < 10) yy = '0' + yy;
                    return dd + '.' + mm + '.' + yy;
                } else if (format == 'minTime') {
                    if (dd < 10) dd = '0' + dd;
                    if (mm += 1 < 10) mm = '0' + mm;
                    if ((yy %= 100) < 10) yy = '0' + yy;
                    return dd + '.' + mm + '.' + yy;
                } else if (format == 'year') {
                    if (yy < 10) yy = '0' + yy;
                    return yy;
                } else if (format == 'month') {
                    if (mm += 1 < 10) mm = '0' + mm;
                    return mm;
                } else if (format == 'day') {
                    if (dd < 10) dd = '0' + dd;
                    return dd;
                } else if (format == 'day-month') {
                    if (dd < 10) dd = '0' + dd;
                    if (mm += 1 < 10) mm = '0' + mm;
                    return dd + '.' + mm;
                } else if (format == 'day-year') {
                    if (dd < 10) dd = '0' + dd;
                    if (yy < 10) yy = '0' + yy;
                    return dd + '.' + yy;
                } else if (format == 'month-year') {
                    if (mm += 1 < 10) mm = '0' + mm;
                    if (yy < 10) yy = '0' + yy;
                    return mm + '.' + yy;
                } else if (format == 'false') {
                    return '';
                } else {
                    if (dd < 10) dd = '0' + dd;
                    if (mm += 1 < 10) mm = '0' + mm;
                    if (yy < 10) yy = '0' + yy;
                    return dd + '.' + mm + '.' + yy;
                };
            };
        };
    </script>
</body>

</html>
